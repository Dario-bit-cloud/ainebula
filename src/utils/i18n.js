// Sistema di traduzioni i18n per Nebula AI

export const translations = {
  it: {
    // Generale
    'settings': 'Impostazioni',
    'language': 'Lingua',
    'theme': 'Tema',
    'system': 'Sistema',
    'light': 'Chiaro',
    'dark': 'Scuro',
    'close': 'Chiudi',
    'cancel': 'Annulla',
    'confirm': 'Conferma',
    'save': 'Salva',
    'delete': 'Elimina',
    'edit': 'Modifica',
    'ok': 'OK',
    'yes': 'Sì',
    'no': 'No',
    
    // Sidebar
    'newChat': 'Nuova chat',
    'searchChats': 'Cerca chat',
    'library': 'Libreria',
    'projects': 'Progetti',
    'noChatsYet': 'Nessuna chat ancora',
    'createNewChat': 'Crea una nuova chat per iniziare',
    'noResultsFound': 'Nessun risultato trovato',
    'noChatFound': 'Nessuna chat trovata',
    'chatWithoutFolder': 'Chat senza cartella',
    'moveToFolder': 'Sposta in cartella',
    'removeFromFolder': 'Rimuovi da cartella',
    'deleteChat': 'Elimina chat',
    'deleteChatConfirm': 'Sei sicuro di voler eliminare questa chat?',
    'deleteFolder': 'Elimina cartella',
    'deleteFolderConfirm': 'Sei sicuro di voler eliminare questa cartella? Le chat non verranno eliminate.',
    'newFolder': 'Nuova cartella',
    'noFoldersYet': 'Nessuna cartella ancora',
    'createNewFolder': 'Crea una nuova cartella per organizzare le chat',
    'noChatsInFolder': 'Nessuna chat in questa cartella',
    'inviteAndEarn': 'Invita e guadagna fino a 500€',
    'user': 'Utente',
    'noWorkspace': 'Nessun workspace',
    'today': 'Oggi',
    'yesterday': 'Ieri',
    'daysAgo': '{n} giorni fa',
    'collapseSidebar': 'Comprimi menu',
    'expandSidebar': 'Espandi menu',
    
    // Settings
    'general': 'Generale',
    'profile': 'Profilo',
    'subscription': 'Abbonamento',
    'data': 'Dati',
    'information': 'Informazioni',
    'username': 'Username',
    'phoneNumber': 'Numero di telefono',
    'disconnectAllDevices': 'Disconnetti da tutti i dispositivi',
    'disconnect': 'Disconnetti',
    'disconnectConfirm': 'Sei sicuro di voler disconnetterti da tutti i dispositivi?',
    'disconnectSuccess': 'Disconnessione completata. Ricarica la pagina.',
    'deleteAccount': 'Elimina account',
    'deleteAccountConfirm1': '⚠️ ATTENZIONE: Questa azione è IRREVERSIBILE!\n\nTutti i tuoi dati verranno eliminati permanentemente:\n- Account e profilo\n- Tutte le chat e messaggi\n- Tutti i progetti\n- Tutte le impostazioni\n- Tutti gli abbonamenti\n\nPer confermare, digita "ELIMINA" in maiuscolo:',
    'deleteAccountConfirm2': '⚠️ ULTIMA CONFERMA ⚠️\n\nSei ASSOLUTAMENTE SICURO di voler eliminare il tuo account?\n\nQuesta azione NON può essere annullata.\n\nTutti i tuoi dati verranno eliminati permanentemente dal database.',
    'deleteAccountFinal': 'Elimina definitivamente',
    'deleteAccountInvalid': 'Conferma non valida. Operazione annullata.',
    'deleteAccountSuccess': '✅ Account eliminato con successo. Tutti i dati sono stati rimossi permanentemente.\n\nLa pagina verrà ricaricata.',
    'deleteAccountError': '❌ Errore durante l\'eliminazione dell\'account: {error}',
    'deletingAccount': 'Eliminazione in corso...',
    'subscriptionStatus': 'Stato Abbonamento',
    'currentPlan': 'Piano corrente',
    'expiration': 'Scadenza',
    'activationDate': 'Data attivazione',
    'active': 'Attivo',
    'inactive': 'Non attivo',
    'upgradePlan': 'Aggiorna piano',
    'upgradeDescription': 'Sblocca funzionalità premium con un abbonamento Pro o Massimo',
    'upgrade': 'Aggiorna',
    'manageSubscription': 'Gestisci abbonamento',
    'manageDescription': 'Modifica o cancella il tuo abbonamento premium',
    'manage': 'Gestisci',
    'free': 'Gratuito',
    'pro': 'Pro',
    'max': 'Massimo',
    'loadingSubscription': 'Caricamento informazioni abbonamento...',
    'sharedLinks': 'Link condivisi',
    'exportData': 'Esporta dati',
    'exportDescription': 'Questi dati includono le informazioni del tuo account e tutta la cronologia delle chat. L\'esportazione potrebbe richiedere del tempo. Il link per il download sarà valido per 7 giorni.',
    'exportSuccess': 'Dati esportati con successo! Il file sarà valido per 7 giorni.',
    'exportCompleted': 'Esportazione completata',
    'subscriptionKey': 'Chiave abbonamento',
    'subscriptionKeyDescription': 'Scarica la chiave del tuo abbonamento per ripristinarlo su altri dispositivi. Conserva questa chiave in un luogo sicuro.',
    'downloadKey': 'Scarica chiave',
    'importKey': 'Importa chiave',
    'downloadKeySuccess': 'Chiave di abbonamento scaricata con successo! Conservala in un luogo sicuro per ripristinare l\'abbonamento su altri dispositivi.',
    'keyDownloaded': 'Chiave scaricata',
    'importKeySuccess': 'Chiave di abbonamento importata con successo!',
    'keyImported': 'Chiave importata',
    'invalidFile': 'File non valido. Il file deve contenere una chiave di abbonamento.',
    'importError': 'Errore durante l\'importazione della chiave. Verifica che il file sia valido.',
    'noKeyAvailable': 'Nessuna chiave di abbonamento disponibile. Attiva un abbonamento per ottenere una chiave.',
    'keyNotAvailable': 'Chiave non disponibile',
    'deleteAllChats': 'Elimina tutte le chat',
    'deleteAllChatsConfirm': 'Sei sicuro di voler eliminare tutte le chat? Questa azione è irreversibile.',
    'deleteAllChatsSuccess': 'Tutte le chat sono state eliminate.',
    'chatsDeleted': 'Chat eliminate',
    'clearAll': 'Cancella tutto',
    'termsOfService': 'Termini di utilizzo',
    'privacyPolicy': 'Informativa sulla privacy',
    'view': 'Visualizza',
    'manageSharedLinks': 'Gestione link condivisi - Funzionalità in arrivo',
    
    // MainArea
    'typeMessage': 'Scrivi un messaggio...',
    'send': 'Invia',
    'stop': 'Ferma',
    'regenerate': 'Rigenera',
    'copy': 'Copia',
    'copied': 'Copiato!',
    'editMessage': 'Modifica messaggio',
    'deleteMessage': 'Elimina messaggio',
    'deleteMessageConfirm': 'Sei sicuro di voler eliminare questo messaggio?',
    'deleteMessageConfirmAll': 'Verranno eliminati anche tutti i messaggi successivi.',
    'useful': 'Utile',
    'notUseful': 'Non utile',
    'moreActions': 'Altre azioni',
    'readAloud': 'Leggi ad alta voce',
    'reportMessage': 'Segnala messaggio',
    'moreDetailed': 'Più dettagliato',
    'moreSimple': 'Più semplice',
    'attachFile': 'Allega file',
    'attachImage': 'Allega immagine',
    'generating': 'Generando...',
    'errorGenerating': 'Errore durante la generazione',
    'errorOccurred': 'Si è verificato un errore',
    'tryAgain': 'Riprova',
    'codeCopied': '✓ Codice copiato!',
    'tokens': 'Token',
    'unlimited': 'Illimitati',
    'welcomeTitle': 'Ciao, sono Nebula AI.',
    'welcomeSubtitle': 'Chiedimi qualsiasi cosa.<br />La nostra conversazione rimarrà riservata.',
    'searchInChat': 'Cerca nella chat corrente...',
    'editImage': 'Modifica immagine',
    'describeImage': 'Descrivi un\'immagine',
    'stopGeneration': 'Ferma generazione',
    'saveEdit': 'Salva modifica',
    'sendMessage': 'Invia messaggio',
    'editMessagePlaceholder': 'Modifica il messaggio...',
    'messageToNebula': 'Messaggio a Nebula AI',
    
    // Auth
    'login': 'Accedi',
    'register': 'Registrati',
    'email': 'Email',
    'password': 'Password',
    'confirmPassword': 'Conferma password',
    'forgotPassword': 'Password dimenticata?',
    'alreadyHaveAccount': 'Hai già un account?',
    'dontHaveAccount': 'Non hai un account?',
    'loginError': 'Errore durante l\'accesso',
    'registerError': 'Errore durante la registrazione',
    'logout': 'Esci',
    
    // Premium
    'premiumFeatures': 'Funzionalità Premium',
    'upgradeToPro': 'Passa a Pro',
    'upgradeToMax': 'Passa a Massimo',
    
    // Errors
    'error': 'Errore',
    'warning': 'Avviso',
    'info': 'Info',
    'success': 'Successo',
    'operationCancelled': 'Operazione annullata',
    
    // AI Settings
    'aiSettings': 'Impostazioni AI',
    'temperature': 'Temperatura',
    'maxTokens': 'Token massimi',
    'topP': 'Top P',
    'frequencyPenalty': 'Penalità frequenza',
    'presencePenalty': 'Penalità presenza',
    
    // Shortcuts
    'keyboardShortcuts': 'Scorciatoie da tastiera',
    
    // Prompt Library
    'promptLibrary': 'Libreria Prompt',
    
    // Projects
    'newProject': 'Nuovo progetto',
    'projectName': 'Nome progetto',
    'projectColor': 'Colore',
    'projectIcon': 'Icona',
    
    // Personalization
    'personalization': 'Personalizzazione',
    
    // Report Bug
    'reportBug': 'Segnala un bug',
    
    // Invite
    'invite': 'Invita',
    
    // TopBar
    'menu': 'Menu',
    'requiresSubscription': 'Richiede abbonamento {plan}',
    
    // Date formats
    'january': 'Gennaio',
    'february': 'Febbraio',
    'march': 'Marzo',
    'april': 'Aprile',
    'may': 'Maggio',
    'june': 'Giugno',
    'july': 'Luglio',
    'august': 'Agosto',
    'september': 'Settembre',
    'october': 'Ottobre',
    'november': 'Novembre',
    'december': 'Dicembre'
  },
  
  en: {
    // General
    'settings': 'Settings',
    'language': 'Language',
    'theme': 'Theme',
    'system': 'System',
    'light': 'Light',
    'dark': 'Dark',
    'close': 'Close',
    'cancel': 'Cancel',
    'confirm': 'Confirm',
    'save': 'Save',
    'delete': 'Delete',
    'edit': 'Edit',
    'ok': 'OK',
    'yes': 'Yes',
    'no': 'No',
    
    // Sidebar
    'newChat': 'New chat',
    'searchChats': 'Search chats',
    'library': 'Library',
    'projects': 'Projects',
    'noChatsYet': 'No chats yet',
    'createNewChat': 'Create a new chat to get started',
    'noResultsFound': 'No results found',
    'noChatFound': 'No chat found',
    'chatWithoutFolder': 'Chats without folder',
    'moveToFolder': 'Move to folder',
    'removeFromFolder': 'Remove from folder',
    'deleteChat': 'Delete chat',
    'deleteChatConfirm': 'Are you sure you want to delete this chat?',
    'deleteFolder': 'Delete folder',
    'deleteFolderConfirm': 'Are you sure you want to delete this folder? Chats will not be deleted.',
    'inviteAndEarn': 'Invite and earn up to €500',
    'user': 'User',
    'noWorkspace': 'No workspace',
    'today': 'Today',
    'yesterday': 'Yesterday',
    'daysAgo': '{n} days ago',
    'collapseSidebar': 'Collapse sidebar',
    'expandSidebar': 'Expand sidebar',
    
    // Settings
    'general': 'General',
    'profile': 'Profile',
    'subscription': 'Subscription',
    'data': 'Data',
    'information': 'Information',
    'username': 'Username',
    'phoneNumber': 'Phone number',
    'disconnectAllDevices': 'Disconnect from all devices',
    'disconnect': 'Disconnect',
    'disconnectConfirm': 'Are you sure you want to disconnect from all devices?',
    'disconnectSuccess': 'Disconnection completed. Reload the page.',
    'deleteAccount': 'Delete account',
    'deleteAccountConfirm1': '⚠️ WARNING: This action is IRREVERSIBLE!\n\nAll your data will be permanently deleted:\n- Account and profile\n- All chats and messages\n- All projects\n- All settings\n- All subscriptions\n\nTo confirm, type "DELETE" in uppercase:',
    'deleteAccountConfirm2': '⚠️ FINAL CONFIRMATION ⚠️\n\nAre you ABSOLUTELY SURE you want to delete your account?\n\nThis action CANNOT be undone.\n\nAll your data will be permanently deleted from the database.',
    'deleteAccountFinal': 'Delete permanently',
    'deleteAccountInvalid': 'Invalid confirmation. Operation cancelled.',
    'deleteAccountSuccess': '✅ Account deleted successfully. All data has been permanently removed.\n\nThe page will reload.',
    'deleteAccountError': '❌ Error deleting account: {error}',
    'deletingAccount': 'Deleting...',
    'subscriptionStatus': 'Subscription Status',
    'currentPlan': 'Current plan',
    'expiration': 'Expiration',
    'activationDate': 'Activation date',
    'active': 'Active',
    'inactive': 'Inactive',
    'upgradePlan': 'Upgrade plan',
    'upgradeDescription': 'Unlock premium features with a Pro or Max subscription',
    'upgrade': 'Upgrade',
    'manageSubscription': 'Manage subscription',
    'manageDescription': 'Modify or cancel your premium subscription',
    'manage': 'Manage',
    'free': 'Free',
    'pro': 'Pro',
    'max': 'Max',
    'loadingSubscription': 'Loading subscription information...',
    'sharedLinks': 'Shared links',
    'exportData': 'Export data',
    'exportDescription': 'This data includes your account information and all chat history. Export may take some time. The download link will be valid for 7 days.',
    'exportSuccess': 'Data exported successfully! The file will be valid for 7 days.',
    'exportCompleted': 'Export completed',
    'subscriptionKey': 'Subscription key',
    'subscriptionKeyDescription': 'Download your subscription key to restore it on other devices. Keep this key in a safe place.',
    'downloadKey': 'Download key',
    'importKey': 'Import key',
    'downloadKeySuccess': 'Subscription key downloaded successfully! Keep it in a safe place to restore your subscription on other devices.',
    'keyDownloaded': 'Key downloaded',
    'importKeySuccess': 'Subscription key imported successfully!',
    'keyImported': 'Key imported',
    'invalidFile': 'Invalid file. The file must contain a subscription key.',
    'importError': 'Error importing key. Please verify that the file is valid.',
    'noKeyAvailable': 'No subscription key available. Activate a subscription to get a key.',
    'keyNotAvailable': 'Key not available',
    'deleteAllChats': 'Delete all chats',
    'deleteAllChatsConfirm': 'Are you sure you want to delete all chats? This action is irreversible.',
    'deleteAllChatsSuccess': 'All chats have been deleted.',
    'chatsDeleted': 'Chats deleted',
    'clearAll': 'Clear all',
    'termsOfService': 'Terms of Service',
    'privacyPolicy': 'Privacy Policy',
    'view': 'View',
    'manageSharedLinks': 'Shared links management - Coming soon',
    
    // MainArea
    'typeMessage': 'Type a message...',
    'send': 'Send',
    'stop': 'Stop',
    'regenerate': 'Regenerate',
    'copy': 'Copy',
    'copied': 'Copied!',
    'editMessage': 'Edit message',
    'deleteMessage': 'Delete message',
    'deleteMessageConfirm': 'Are you sure you want to delete this message?',
    'deleteMessageConfirmAll': 'All subsequent messages will also be deleted.',
    'useful': 'Useful',
    'notUseful': 'Not useful',
    'moreActions': 'More actions',
    'readAloud': 'Read aloud',
    'reportMessage': 'Report message',
    'moreDetailed': 'More detailed',
    'moreSimple': 'Simpler',
    'attachFile': 'Attach file',
    'attachImage': 'Attach image',
    'generating': 'Generating...',
    'errorGenerating': 'Error generating',
    'errorOccurred': 'An error occurred',
    'tryAgain': 'Try again',
    'codeCopied': '✓ Code copied!',
    'tokens': 'Tokens',
    'unlimited': 'Unlimited',
    'welcomeTitle': 'Hello, I\'m Nebula AI.',
    'welcomeSubtitle': 'Ask me anything.<br />Our conversation will remain private.',
    'searchInChat': 'Search in current chat...',
    'editImage': 'Edit image',
    'describeImage': 'Describe an image',
    'stopGeneration': 'Stop generation',
    'saveEdit': 'Save edit',
    'sendMessage': 'Send message',
    'editMessagePlaceholder': 'Edit message...',
    'messageToNebula': 'Message to Nebula AI',
    
    // Auth
    'login': 'Log in',
    'register': 'Sign up',
    'email': 'Email',
    'password': 'Password',
    'confirmPassword': 'Confirm password',
    'forgotPassword': 'Forgot password?',
    'alreadyHaveAccount': 'Already have an account?',
    'dontHaveAccount': "Don't have an account?",
    'loginError': 'Login error',
    'registerError': 'Registration error',
    'logout': 'Log out',
    
    // Premium
    'premiumFeatures': 'Premium Features',
    'upgradeToPro': 'Upgrade to Pro',
    'upgradeToMax': 'Upgrade to Max',
    
    // Errors
    'error': 'Error',
    'warning': 'Warning',
    'info': 'Info',
    'success': 'Success',
    'operationCancelled': 'Operation cancelled',
    
    // AI Settings
    'aiSettings': 'AI Settings',
    'temperature': 'Temperature',
    'maxTokens': 'Max tokens',
    'topP': 'Top P',
    'frequencyPenalty': 'Frequency penalty',
    'presencePenalty': 'Presence penalty',
    
    // Shortcuts
    'keyboardShortcuts': 'Keyboard shortcuts',
    
    // Prompt Library
    'promptLibrary': 'Prompt Library',
    
    // Projects
    'newProject': 'New project',
    'projectName': 'Project name',
    'projectColor': 'Color',
    'projectIcon': 'Icon',
    
    // Personalization
    'personalization': 'Personalization',
    
    // Report Bug
    'reportBug': 'Report a bug',
    
    // Invite
    'invite': 'Invite',
    
    // TopBar
    'menu': 'Menu',
    'requiresSubscription': 'Requires {plan} subscription',
    
    // Date formats
    'january': 'January',
    'february': 'February',
    'march': 'March',
    'april': 'April',
    'may': 'May',
    'june': 'June',
    'july': 'July',
    'august': 'August',
    'september': 'September',
    'october': 'October',
    'november': 'November',
    'december': 'December'
  }
};

// Determina la lingua di sistema
function getSystemLanguage() {
  if (typeof window === 'undefined') return 'it';
  const browserLang = navigator.language || navigator.userLanguage;
  const langCode = browserLang.split('-')[0].toLowerCase();
  
  // Mappa le lingue del browser alle nostre lingue supportate
  const langMap = {
    'it': 'it',
    'en': 'en'
  };
  
  return langMap[langCode] || 'it'; // Default italiano
}

// Ottieni la lingua corrente
export function getCurrentLanguage() {
  if (typeof window === 'undefined') return 'it';
  
  const saved = localStorage.getItem('nebula-language');
  if (saved === 'system') {
    return getSystemLanguage();
  }
  return saved || 'it';
}

// Funzione per tradurre (versione non reattiva, per uso in contesti non-Svelte)
export function t(key, params = {}, langOverride = null) {
  const lang = langOverride || getCurrentLanguage();
  const translation = translations[lang]?.[key] || translations['it']?.[key] || key;
  
  // Sostituisci i parametri {param}
  return translation.replace(/\{(\w+)\}/g, (match, paramKey) => {
    return params[paramKey] !== undefined ? params[paramKey] : match;
  });
}

// Funzione per ottenere tutte le traduzioni di una lingua
export function getTranslations(lang) {
  return translations[lang] || translations['it'];
}

// Esporta le lingue disponibili
export const availableLanguages = [
  { code: 'system', name: 'Sistema', nativeName: { it: 'Sistema', en: 'System' } },
  { code: 'it', name: 'Italiano', nativeName: { it: 'Italiano', en: 'Italian' } },
  { code: 'en', name: 'English', nativeName: { it: 'Inglese', en: 'English' } }
];
